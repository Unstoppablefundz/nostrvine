{
  "embedding": [
    -0.05888671427965164,
    -0.045929815620183945,
    0.021344095468521118,
    -0.04171649366617203,
    0.06589847803115845,
    -0.026234686374664307,
    0.02352932095527649,
    -0.03872419893741608,
    0.010518649592995644,
    0.0367257185280323,
    -0.01059065479785204,
    -0.013363126665353775,
    -0.060914576053619385,
    0.04321865364909172,
    0.008996433578431606,
    -0.05496881157159805,
    0.07034293562173843,
    -0.03653009980916977,
    -0.06110983341932297,
    -0.016575045883655548,
    -0.03599391132593155,
    -0.04413432627916336,
    -0.01859753206372261,
    0.05644093081355095,
    -0.05309166759252548,
    -0.018609454855322838,
    -0.017673274502158165,
    -0.0409749299287796,
    0.02172568440437317,
    -0.060377463698387146,
    0.09952615201473236,
    -0.029463283717632294,
    -0.07253119349479675,
    -0.02171107940375805,
    0.06991825252771378,
    0.004078807309269905,
    -0.02098863013088703,
    -0.07796177268028259,
    -0.10015777498483658,
    -0.0479331873357296,
    0.08920437097549438,
    -0.030149666592478752,
    -0.03687549754977226,
    -0.006974963005632162,
    -0.01643657311797142,
    -0.027694808319211006,
    0.016951505094766617,
    -0.04922632873058319,
    -0.08382602781057358,
    -0.02204844169318676,
    -0.03732536733150482,
    -0.00492449477314949,
    -0.02681003324687481,
    0.05330653861165047,
    0.055130328983068466,
    0.05386893451213837,
    0.002449773019179702,
    0.006185928825289011,
    0.007653512060642242,
    -0.014014799147844315,
    0.06175043061375618,
    -0.046028777956962585,
    -0.020431816577911377,
    0.015852617099881172,
    -0.013981856405735016,
    0.019220370799303055,
    0.09072819352149963,
    -0.05878655984997749,
    0.10637440532445908,
    0.007276201620697975,
    -0.1180625632405281,
    0.10426140576601028,
    -0.04920932650566101,
    0.03478439152240753,
    -0.012396855279803276,
    -0.009662361815571785,
    0.02446664124727249,
    -0.02331002987921238,
    -0.024155013263225555,
    -0.1577567309141159,
    -0.00425780238583684,
    -0.057996317744255066,
    0.08262705057859421,
    0.005276666488498449,
    0.09760637581348419,
    -0.01699097454547882,
    -0.017238827422261238,
    -0.057754889130592346,
    0.03317476809024811,
    -0.0382295586168766,
    -0.0536828450858593,
    0.05543183162808418,
    0.03869003802537918,
    -0.029774578288197517,
    -0.0005254874122329056,
    0.009657662361860275,
    -0.00871896930038929,
    0.017538396641612053,
    0.01832568645477295,
    0.06373685598373413,
    0.005501294042915106,
    0.02535385824739933,
    -0.028581196442246437,
    0.08131324499845505,
    0.019185727462172508,
    0.004007060546427965,
    -0.09318125993013382,
    -0.010530420579016209,
    -0.08669635653495789,
    0.04217585548758507,
    -0.009595881216228008,
    0.017436068505048752,
    0.016659965738654137,
    -0.09958617389202118,
    0.0053917714394629,
    0.08207587152719498,
    -0.04056726023554802,
    0.048331256955862045,
    -0.01883457787334919,
    0.062484800815582275,
    0.09021437913179398,
    0.007045848295092583,
    0.00929032452404499,
    -0.03397347033023834,
    0.0058588492684066296,
    0.031813520938158035,
    0.09415653347969055,
    8.74362085500388e-33,
    0.024682022631168365,
    -0.06145736575126648,
    -0.09239137172698975,
    -0.0022157051134854555,
    0.05018119886517525,
    0.0531475767493248,
    0.05025744065642357,
    0.04985872283577919,
    0.013575906865298748,
    0.000780389818828553,
    0.0653228908777237,
    -0.032766446471214294,
    -0.0535343773663044,
    -0.049725309014320374,
    0.04552803561091423,
    0.01399963442236185,
    -0.04631172865629196,
    0.035868387669324875,
    0.026352934539318085,
    0.043897341936826706,
    -0.004828929901123047,
    0.03853914141654968,
    -0.07420412451028824,
    -0.011469286866486073,
    0.015329279936850071,
    0.045189086347818375,
    0.05045689642429352,
    0.011034810915589333,
    0.050992708653211594,
    -0.017138181254267693,
    0.05905997380614281,
    -0.0076125613413751125,
    -0.004287084098905325,
    0.043022360652685165,
    -0.000117874464194756,
    -0.023903196677565575,
    -0.06892561167478561,
    -0.06780340522527695,
    -0.04293644800782204,
    -0.052642371505498886,
    -0.05969003960490227,
    0.04213600233197212,
    -0.1472557932138443,
    -0.11271855235099792,
    -0.03778189793229103,
    -0.06528278440237045,
    0.030848173424601555,
    0.005529665853828192,
    0.06260614842176437,
    -0.03737454488873482,
    0.06756103783845901,
    0.020214494317770004,
    0.017487673088908195,
    -0.10630986839532852,
    -0.055446114391088486,
    0.032869867980480194,
    0.07390985637903214,
    -0.011594542302191257,
    0.07404665648937225,
    0.060628268867731094,
    0.0031462532933801413,
    -0.07143690437078476,
    0.028795169666409492,
    -0.013405825011432171,
    -0.014748143963515759,
    0.005615380592644215,
    0.0729781985282898,
    -0.02276645042002201,
    0.029236340895295143,
    0.019238760694861412,
    0.009180485270917416,
    0.0384543314576149,
    0.04157768189907074,
    -0.04766320809721947,
    0.021966595202684402,
    -0.06728888303041458,
    -0.011455906555056572,
    0.024342188611626625,
    -0.04730652645230293,
    0.019766801968216896,
    0.029971279203891754,
    -0.04512418061494827,
    0.025244588032364845,
    0.07242283225059509,
    0.011707956902682781,
    -0.05838765576481819,
    -0.005616269540041685,
    -0.03151923790574074,
    -0.047854676842689514,
    -0.023118048906326294,
    0.056754592806100845,
    -0.0024505562614649534,
    0.10328790545463562,
    0.005715587642043829,
    -0.007270337548106909,
    -8.768797005262616e-33,
    0.028202218934893608,
    0.05863752216100693,
    -0.056728217750787735,
    0.05498058348894119,
    -0.004105711355805397,
    -0.034609295427799225,
    -0.020042316988110542,
    -0.00022430862009059638,
    0.03688500076532364,
    -0.0715242326259613,
    -0.023860910907387733,
    -0.03649761900305748,
    -0.05835855379700661,
    -0.03364996984601021,
    -0.1033555269241333,
    0.017115846276283264,
    -0.06623957306146622,
    -0.14131927490234375,
    -0.08335389196872711,
    0.012884682975709438,
    -0.015591717325150967,
    0.13762745261192322,
    -0.015239080414175987,
    -0.018901105970144272,
    -0.013524039648473263,
    -0.0009065823978744447,
    0.0872144103050232,
    0.04620814695954323,
    0.04053599387407303,
    -0.08349833637475967,
    0.027803996577858925,
    -0.000020303783458075486,
    -0.09090352803468704,
    -0.012202960439026356,
    0.0751863345503807,
    -0.02023523487150669,
    0.07611516118049622,
    0.04041895642876625,
    -0.11840946227312088,
    0.04105951264500618,
    0.09357316046953201,
    0.04943146929144859,
    -0.0098846685141325,
    -0.006885761395096779,
    0.011490198783576488,
    0.08208181709051132,
    -0.05874006822705269,
    0.013561440631747246,
    -0.03327598422765732,
    0.04496676102280617,
    -0.026412267237901688,
    -0.03639575466513634,
    -0.07105737179517746,
    0.07259756326675415,
    0.013870881870388985,
    0.08645862340927124,
    -0.0059143840335309505,
    0.027002790942788124,
    -0.0365203320980072,
    -0.018743935972452164,
    0.02418356016278267,
    -0.041574012488126755,
    0.003436892759054899,
    0.03165818750858307,
    0.06901799142360687,
    0.020191336050629616,
    -0.04884837940335274,
    -0.018456585705280304,
    -0.018340718001127243,
    0.03278973698616028,
    -0.007967067882418633,
    -0.013299095444381237,
    -0.041470080614089966,
    -0.06353140622377396,
    0.038537755608558655,
    0.03690340369939804,
    0.054189249873161316,
    -0.09447476267814636,
    0.031426575034856796,
    0.0013539644423872232,
    -0.17061163485050201,
    -0.01770215481519699,
    0.03314303234219551,
    -0.045611727982759476,
    -0.03178193047642708,
    0.08906547725200653,
    0.045545581728219986,
    0.05763620883226395,
    0.0421445332467556,
    -0.021733812987804413,
    -0.03765444457530975,
    0.01631651073694229,
    -0.033430054783821106,
    0.03481128066778183,
    0.016753442585468292,
    -6.167056909589519e-8,
    -0.04206633195281029,
    -0.024630187079310417,
    -0.08246811479330063,
    0.04545336961746216,
    -0.010116652585566044,
    -0.061033766716718674,
    -0.001297727576456964,
    0.04409479722380638,
    0.030779829248785973,
    -0.03602231293916702,
    0.020541058853268623,
    0.028630482032895088,
    -0.011738925240933895,
    -0.04179411381483078,
    0.009145773015916348,
    -0.057980772107839584,
    0.026458963751792908,
    0.011600371450185776,
    -0.10788100957870483,
    -0.03432271257042885,
    -0.06873256713151932,
    0.03765180706977844,
    0.0405692532658577,
    -0.05100475624203682,
    -0.07900271564722061,
    0.05259745195508003,
    0.06945516169071198,
    0.08552887290716171,
    0.0921613872051239,
    -0.02965812012553215,
    0.01132253184914589,
    -0.013456577435135841,
    0.060267139226198196,
    -0.10585643351078033,
    0.016937345266342163,
    0.018372507765889168,
    0.010679789818823338,
    0.011090202257037163,
    0.072067491710186,
    0.07950519025325775,
    0.027654824778437614,
    -0.028758825734257698,
    0.022803600877523422,
    0.05375829339027405,
    -0.008224640972912312,
    0.020167456939816475,
    -0.09046067297458649,
    -0.04266046732664108,
    0.053209640085697174,
    0.05029173195362091,
    -0.08484791964292526,
    -0.017700815573334694,
    -0.04459814354777336,
    0.05909381061792374,
    0.04039306193590164,
    -0.011425239965319633,
    0.11412128806114197,
    -0.05105241388082504,
    0.033827003091573715,
    0.038896482437849045,
    0.09925615787506104,
    -0.06989434361457825,
    0.018852848559617996,
    0.020027635619044304
  ],
  "text": "**Replaceable Events Implementation (NIP-33) - VideoEventService:**\n\nSuccessfully implemented timestamp-based replaceable event handling for video events (kinds 34235, 34236):\n\n1. **Core Logic (`_handleReplaceableVideoEvent`):**\n   - Tracks events by `(subscriptionType, kind, pubkey, d-tag)` tuple\n   - Compares timestamps when duplicate replaceable event arrives\n   - Keeps newer version, removes old from `_eventLists`\n   - Returns false to skip older incoming events\n\n2. **Integration Points:**\n   - Called in both `_handleNewVideoEvent` (real-time) and `_handleHistoricalVideoEvent` (pagination)\n   - Works across all subscription types (discovery, homeFeed, profile, etc.)\n\n3. **Test Infrastructure:**\n   - Added `handleEventForTesting()` method with `@visibleForTesting` annotation\n   - Created comprehensive test file covering:\n     - Newer replaces older\n     - Older rejected when newer exists\n     - Different d-tags create separate videos\n     - Subscription-type isolation\n     - Non-replaceable events (kind 22) not deduplicated\n\n4. **Status:**\n   - Implementation complete and committed (d425502)\n   - Test file needs Event constructor fixes (nostr_sdk Event takes positional args)\n   - Next: Complete test fixes, verify tests pass, then apply same pattern to other cache services\n\n**Key Insight:** This same pattern will need to be applied to:\n- ProfileCacheService (kind 0 profile events)\n- Any other cache services handling replaceable events",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1760689547974,
  "path": "/Users/rabble/code/andotherstuff/openvine/.private-journal/2025-10-17/21-25-47-974479.md"
}